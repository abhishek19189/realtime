<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Exercise Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .video-container {
            position: relative;
            max-width: 100%;
            height: auto;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        .feedback {
            background: rgba(0, 255, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
        }
        .warning {
            background: rgba(255, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
        }
    </style>
</head>
<body class="p-4">
    <div class="max-w-6xl mx-auto glass p-6">
        <h1 class="text-3xl font-bold text-center mb-6 text-white">AI-Powered Real-Time Exercise Tracker</h1>
        <p class="text-center mb-4 text-white">Track your posture, receive instant feedback, and get customized exercise suggestions based on your needs.</p>
        
        <div class="flex flex-col lg:flex-row justify-between mb-6">
            <div class="w-full lg:w-1/2 mb-4 lg:mb-0">
                <label for="exercise-select" class="block text-white mb-2">Select Exercise:</label>
                <select id="exercise-select" class="w-full p-2 rounded border-2 border-gray-300">
                    <option value="squat">Squats</option>
                    <!-- <option value="pushup">Push-Ups</option>
                    <option value="deadlift">Deadlifts</option>
                    <option value="plank">Planks</option> -->
                </select>
            </div>
            <div class="w-full lg:w-1/2 lg:ml-4">
                <label for="goal-select" class="block text-white mb-2">Your Goal:</label>
                <select id="goal-select" class="w-full p-2 rounded border-2 border-gray-300">
                    <option value="build-muscle">Build Muscle</option>
                    <!-- <option value="lose-weight">Lose Weight</option>
                    <option value="improve-flexibility">Improve Flexibility</option>
                    <option value="injury-prevention">Injury Prevention</option> -->
                </select>
            </div>
        </div>
        
        <div class="video-container mx-auto mb-6">
            <video id="video" class="w-full rounded-lg"></video>
            <canvas id="output"></canvas>
        </div>
        
        <div class="text-center mb-4">
            <button id="start-btn" class="bg-blue-500 text-white px-6 py-3 rounded mr-4 hover:bg-blue-600 transition">Start Tracking</button>
            <button id="stop-btn" class="bg-red-500 text-white px-6 py-3 rounded hover:bg-red-600 transition">Stop</button>
        </div>
        
        <div id="feedback" class="hidden mb-6"></div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="glass p-4">
                <h2 class="text-xl font-semibold text-white mb-2">Posture Feedback</h2>
                <p id="posture-feedback" class="text-white">Feedback will appear here during exercise tracking.</p>
            </div>
            <div class="glass p-4">
                <h2 class="text-xl font-semibold text-white mb-2">Suggestions</h2>
                <p id="suggestions" class="text-white">Personalized suggestions based on your performance and goals.</p>
            </div>
        </div>
        
        <div class="text-center mt-6">
            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/2f6cc860-370f-4121-bc5a-6427d821e33f.png" alt="Person performing a squat exercise with correct posture: knees aligned over toes, back straight, hips lowered evenly, core engaged, demonstrating proper form for strength training in a gym setting with neutral lighting and simple background." class="w-full rounded-lg shadow-lg" />
        </div>
    </div>

    <script>
        let video = document.getElementById('video');
        let canvasElement = document.getElementById('output');
        let canvasCtx = canvasElement.getContext('2d');
        let pose;
        let camera;
        let isTracking = false;
        let exercise = 'squat';
        let goal = 'build-muscle';

        function onResults(results) {
            canvasCtx.save();
            canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);
            canvasCtx.drawImage(results.image, 0, 0, canvasElement.width, canvasElement.height);

            if (results.poseLandmarks) {
                drawConnectors(canvasCtx, results.poseLandmarks, POSE_CONNECTIONS, {color: '#00FF00', lineWidth: 4});
                drawLandmarks(canvasCtx, results.poseLandmarks, {color: '#FF0000', lineWidth: 2});

                // Analyze posture based on selected exercise
                analyzePosture(results.poseLandmarks);
            }
            canvasCtx.restore();
        }

        function analyzePosture(landmarks) {
            if (!isTracking) return;

            let feedback = '';
            let isCorrect = true;

            if (exercise === 'squat') {
                const leftKnee = landmarks[25]; // Left knee
                const rightKnee = landmarks[26]; // Right knee
                const leftHip = landmarks[23];
                const rightHip = landmarks[24];
                const leftAnkle = landmarks[27];
                const rightAnkle = landmarks[28];

                // Check knee alignment (should be over ankles)
                if (leftKnee.x < leftAnkle.x - 0.05 || rightKnee.x < rightAnkle.x - 0.05) {
                    feedback += 'Knees are leaning inward. Keep them aligned over your toes.<br>';
                    isCorrect = false;
                }

                // Check hip alignment
                if (Math.abs(leftHip.y - rightHip.y) > 0.05) {
                    feedback += 'Hips are uneven. Keep both sides level.<br>';
                    isCorrect = false;
                }
            } else if (exercise === 'pushup') {
                const leftShoulder = landmarks[11];
                const rightShoulder = landmarks[12];
                const leftElbow = landmarks[13];
                const rightElbow = landmarks[14];

                if (Math.abs(leftElbow.y - leftShoulder.y) > 0.1 || Math.abs(rightElbow.y - rightShoulder.y) > 0.1) {
                    feedback += 'Elbows are flaring out. Keep them close to your sides.<br>';
                    isCorrect = false;
                }
            } else if (exercise === 'deadlift') {
                const leftAnkle = landmarks[27];
                const rightAnkle = landmarks[28];
                const nose = landmarks[0];
                const leftHip = landmarks[23];

                if (nose.x < leftAnkle.x || nose.x > rightAnkle.x) {
                    feedback += 'Back is rounding. Keep it straight.<br>';
                    isCorrect = false;
                }
            } else if (exercise === 'plank') {
                const leftElbow = landmarks[13];
                const rightElbow = landmarks[14];
                const leftShoulder = landmarks[11];
                const rightShoulder = landmarks[12];

                if (Math.abs(leftElbow.x - leftShoulder.x) > 0.05 || Math.abs(rightElbow.x - rightShoulder.x) > 0.05) {
                    feedback += 'Elbows are not directly under shoulders.<br>';
                    isCorrect = false;
                }
            }

            if (feedback === '') {
                feedback = 'Great job! Posture looks good.';
            }

            document.getElementById('posture-feedback').innerHTML = feedback;
            document.getElementById('feedback').className = isCorrect ? 'feedback' : 'warning';
            document.getElementById('feedback').innerHTML = isCorrect ? 'Correct Form' : 'Incorrect Form';
            document.getElementById('feedback').classList.remove('hidden');

            // Update suggestions based on goal
            let suggestions = '';
            switch (goal) {
                case 'build-muscle':
                    suggestions = 'Focus on progressive overload. Increase weight or reps as you improve.';
                    break;
                case 'lose-weight':
                    suggestions = 'Combine with cardio. Track calories intake and ensure a deficit.';
                    break;
                case 'improve-flexibility':
                    suggestions = 'Add stretching after workouts. Hold each stretch for 30 seconds.';
                    break;
                case 'injury-prevention':
                    suggestions = 'Warm up properly. Listen to your body and rest if needed.';
                    break;
            }
            document.getElementById('suggestions').innerHTML = suggestions;
        }

        async function startTracking() {
            exercise = document.getElementById('exercise-select').value;
            goal = document.getElementById('goal-select').value;

            const pose = new Pose({
                locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file}`
            });
            pose.setOptions({
                modelComplexity: 1,
                smoothLandmarks: true,
                minDetectionConfidence: 0.5,
                minTrackingConfidence: 0.5
            });
            pose.onResults(onResults);

            const camera = new Camera(video, {
                onFrame: async () => {
                    await pose.send({image: video});
                },
                width: 640,
                height: 480
            });
            await camera.start();
            video.style.display = 'block';
            canvasElement.width = video.videoWidth;
            canvasElement.height = video.videoHeight;
            isTracking = true;
        }

        function stopTracking() {
            isTracking = false;
            video.style.display = 'none';
            canvasCtx.clearRect(0, 0, canvasElement.width, canvasElement.height);
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('posture-feedback').innerHTML = 'Feedback will appear here during exercise tracking.';
            document.getElementById('suggestions').innerHTML = 'Personalized suggestions based on your performance and goals.';
        }

        document.getElementById('start-btn').addEventListener('click', startTracking);
        document.getElementById('stop-btn').addEventListener('click', stopTracking);
    </script>
</body>
</html>
</content>
</create_file>